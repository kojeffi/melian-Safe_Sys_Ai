
{% extends 'dashbord/master.html' %}
{% block content %}
    {% load static %}
    {% load django_bootstrap5 %}

        	<!--begin::Content-->
							<div id="kt_app_content" class="app-content flex-column-fluid">
								<!--begin::Content container-->
								<div id="kt_app_content_container" class="app-container container-fluid">
									<!--begin::Row-->
									<div class="row gx-5 gx-xl-10">
										<!--begin::Col-->
										<div class="col-xxl-6 mb-5 mb-xl-10">
											<!--begin::Chart widget 8-->
											<div class="card card-flush h-xl-100">
												<!--begin::Header-->
												<div class="card-header pt-5">
													<!--begin::Title-->
													<h3 class="card-title align-items-start flex-column">
														<span class="card-label fw-bold text-dark">Report maintenance </span>
													</h3>
													<!--end::Title-->
												</div>
												<!--end::Header-->
												<!--begin::Body-->
												<div class="card-body pt-6">
        <div class="row">
            <div class="col-md-4 rounded">
                <div class="card mb-3 border-0">
                    <div class="card-body bg-light">
                        <h2 class="card-title">Safety Incidents</h2>
                        <form method="post" class="mb-3">
                            {% csrf_token %}
                            {% bootstrap_form safety_incident_form %}
                            <button type="submit" class="btn btn-warning">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-4 rounded">
                <div class="card mb-3 border-0">
                    <div class="card-body bg-light">
                        <h2 class="card-title">Compliance Regulations</h2>
                        <form method="post" class="mb-3">
                            {% csrf_token %}
                            {% bootstrap_form compliance_regulation_form %}
                            <button type="submit" class="btn btn-warning">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-4 rounded">
                <div class="card mb-3 border-0">
                    <div class="card-body bg-light">
                        <h2 class="card-title">Equipment Maintenance</h2>
                        <form method="post" class="mb-3">
                            {% csrf_token %}
                            {% bootstrap_form equipment_maintenance_form %}
                            <button type="submit" class="btn btn-warning">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Display existing data -->
        <div class="row">
            <div class="col-md-12 rounded ">
                <div class="card border-0 shadow">
                    <div class="card-body bg-light ">
                        <h2 class="card-title">Existing Data</h2>
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Timestamp / Regulation Number</th>
                                    <th>Description / Maintenance Details</th>
                                </tr>
                            </thead>
                            <tbody>
                                <h3 class="text-danger">Number of Alerts: {{ alert_count }}</h3>
                                {% for incident in safety_incidents %}
                                <tr>
                                    <td>{{ incident.timestamp }}</td>
                                    <td>{{ incident.description }}</td>
                                </tr>
                                {% endfor %}
                                {% for regulation in compliance_regulations %}
                                <tr>
                                    <td>{{ regulation.regulation_number }}</td>
                                    <td>{{ regulation.description }}</td>
                                </tr>
                                {% endfor %}
                                {% for maintenance in equipment_maintenance %}
                                <tr>
                                    <td>{{ maintenance.equipment_name }}</td>
                                    <td>{{ maintenance.maintenance_date }} - {{ maintenance.maintenance_description }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Add hover effect to cards */
    .card:hover {
        transition: all 0.3s ease-in-out;
        transform: translateY(-5px);
    }

    /* Add different colors to cards */
    .bg-light {
        background-color: #f8f9fa;
    }

    /* Add hover effect to table rows */
    .table-hover tbody tr:hover {
        background-color: #f5f5f5;
        cursor: pointer;
    }

    /* Style for the table border */
    .table {
        border-collapse: collapse;
        width: 100%;
    }

    /* Style for table header */
    .table thead th {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }

    /* Style for table body */
    .table tbody td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }

    /* Alternate row color */
    .table tbody tr:nth-child(even) {
        background-color: #f2f2f2;
    }
</style>

                                        <!--end::Header-->

                                    </div>
                                    <!--end::Header-->
                                </div>
                                <!--end::Content container-->

                            </div>
                            <!--end::Content wrapper-->
                        </div>
                        <!--end:::Main-->
                    </div>
                    <!--end::Wrapper-->
                </div>
                <!--end::Page-->
            </div>
            <!--end::App-->
        </div>
        </div>
{% endblock %}